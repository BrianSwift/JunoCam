(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     33078,        830]
NotebookOptionsPosition[     30713,        755]
NotebookOutlinePosition[     31071,        771]
CellTagsIndexPosition[     31028,        768]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Juno Processing 12 - Details Grid", "Title",
 CellChangeTimes->{{3.696646893338592*^9, 3.696646901581667*^9}, {
  3.708611194826692*^9, 3.708611204633548*^9}, {3.708624450772833*^9, 
  3.708624450850671*^9}, {3.70865988727295*^9, 3.70865988734262*^9}, {
  3.709078815406592*^9, 3.709078831387362*^9}, {3.7094838718618307`*^9, 
  3.709483888981958*^9}, {3.709507128161285*^9, 3.709507128246653*^9}}],

Cell[CellGroupData[{

Cell["Functions", "Subsection",
 CellChangeTimes->{{3.708690589855336*^9, 3.708690590911737*^9}}],

Cell[BoxData[
 RowBox[{"Clear", "[", "\"\<Global`*\>\"", "]"}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"imageInfo", "[", "image_", "]"}], ":=", 
   RowBox[{"ImageMeasurements", "[", 
    RowBox[{"image", ",", 
     RowBox[{"{", 
      RowBox[{
      "\"\<Channels\>\"", ",", "\"\<ColorSpace\>\"", ",", "\"\<DataRange\>\"",
        ",", "\"\<DataType\>\"", ",", "\"\<Dimensions\>\"", ",", 
       "\"\<SampleDepth\>\"", ",", "\"\<Transparency\>\"", ",", "\"\<Min\>\"",
        ",", "\"\<Max\>\"", ",", "\"\<Mean\>\"", ",", "\"\<Median\>\"", ",", 
       "\"\<StandardDeviation\>\""}], "}"}], ",", "Association"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{3.7086525560866623`*^9}],

Cell[BoxData[
 RowBox[{"(*", " ", 
  RowBox[{
   RowBox[{"decompanding", "=", 
    RowBox[{"Import", "[", 
     RowBox[{
     "\"\</Users/bswift/Pictures/Jupiter/decompanding.txt\>\"", ",", 
      "\"\<Table\>\""}], "]"}]}], ";"}], " ", "*)"}]], "Input",
 CellChangeTimes->{{3.709248550464764*^9, 3.709248560515904*^9}, 
   3.709248646865521*^9, {3.709248687361239*^9, 3.709248727744875*^9}, {
   3.709251631123353*^9, 3.709251633904978*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"lut", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "0", ",", "1", ",", "2", ",", "3", ",", "4", ",", "5", ",", "6", ",", 
       "7", ",", "8", ",", "9", ",", "10", ",", "11", ",", "12", ",", "13", 
       ",", "14", ",", "15", ",", "16", ",", "17", ",", "18", ",", "19", ",", 
       "20", ",", "21", ",", "22", ",", "23", ",", "25", ",", "27", ",", "29",
        ",", "31", ",", "33", ",", "35", ",", "37", ",", "39", ",", "41", ",",
        "43", ",", "45", ",", "47", ",", "49", ",", "51", ",", "53", ",", 
       "55", ",", "57", ",", "59", ",", "61", ",", "63", ",", "67", ",", "71",
        ",", "75", ",", "79", ",", "83", ",", "87", ",", "91", ",", "95", ",",
        "99", ",", "103", ",", "107", ",", "111", ",", "115", ",", "119", ",",
        "123", ",", "127", ",", "131", ",", "135", ",", "139", ",", "143", 
       ",", "147", ",", "151", ",", "155", ",", "159", ",", "163", ",", "167",
        ",", "171", ",", "175", ",", "179", ",", "183", ",", "187", ",", 
       "191", ",", "195", ",", "199", ",", "203", ",", "207", ",", "211", ",",
        "215", ",", "219", ",", "223", ",", "227", ",", "231", ",", "235", 
       ",", "239", ",", "243", ",", "247", ",", "255", ",", "263", ",", "271",
        ",", "279", ",", "287", ",", "295", ",", "303", ",", "311", ",", 
       "319", ",", "327", ",", "335", ",", "343", ",", "351", ",", "359", ",",
        "367", ",", "375", ",", "383", ",", "391", ",", "399", ",", "407", 
       ",", "415", ",", "423", ",", "431", ",", "439", ",", "447", ",", "455",
        ",", "463", ",", "471", ",", "479", ",", "487", ",", "495", ",", 
       "503", ",", "511", ",", "519", ",", "527", ",", "535", ",", "543", ",",
        "551", ",", "559", ",", "567", ",", "575", ",", "583", ",", "591", 
       ",", "599", ",", "607", ",", "615", ",", "623", ",", "631", ",", "639",
        ",", "647", ",", "655", ",", "663", ",", "671", ",", "679", ",", 
       "687", ",", "695", ",", "703", ",", "711", ",", "719", ",", "727", ",",
        "735", ",", "743", ",", "751", ",", "759", ",", "767", ",", "775", 
       ",", "783", ",", "791", ",", "799", ",", "807", ",", "815", ",", "823",
        ",", "831", ",", "839", ",", "847", ",", "855", ",", "863", ",", 
       "871", ",", "879", ",", "887", ",", "895", ",", "903", ",", "911", ",",
        "919", ",", "927", ",", "935", ",", "943", ",", "951", ",", "959", 
       ",", "967", ",", "975", ",", "983", ",", "991", ",", "999", ",", 
       "1007", ",", "1023", ",", "1039", ",", "1055", ",", "1071", ",", 
       "1087", ",", "1103", ",", "1119", ",", "1135", ",", "1151", ",", 
       "1167", ",", "1183", ",", "1199", ",", "1215", ",", "1231", ",", 
       "1247", ",", "1263", ",", "1279", ",", "1295", ",", "1311", ",", 
       "1327", ",", "1343", ",", "1359", ",", "1375", ",", "1391", ",", 
       "1407", ",", "1439", ",", "1471", ",", "1503", ",", "1535", ",", 
       "1567", ",", "1599", ",", "1631", ",", "1663", ",", "1695", ",", 
       "1727", ",", "1759", ",", "1791", ",", "1823", ",", "1855", ",", 
       "1887", ",", "1919", ",", "1951", ",", "1983", ",", "2015", ",", 
       "2047", ",", "2079", ",", "2111", ",", "2143", ",", "2175", ",", 
       "2207", ",", "2239", ",", "2271", ",", "2303", ",", "2335", ",", 
       "2367", ",", "2399", ",", "2431", ",", "2463", ",", "2495", ",", 
       "2527", ",", "2559", ",", "2591", ",", "2623", ",", "2655", ",", 
       "2687", ",", "2719", ",", "2751", ",", "2783", ",", "2815", ",", 
       "2847", ",", "2879"}], "}"}], "/", "2879."}], " ", "//", " ", 
    "Developer`ToPackedArray"}]}], " ", ";"}]], "Input",
 CellChangeTimes->{
  3.709300053433729*^9, {3.709300155808486*^9, 3.7093001727576437`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rawToLin", "=", 
   RowBox[{"Compile", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"lut", ",", "_Real", ",", "1"}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"x", ",", "_Integer", ",", "1"}], "}"}]}], "}"}], ",", 
     RowBox[{"lut", "[", 
      RowBox[{"[", 
       RowBox[{"x", "+", "1"}], "]"}], "]"}], ",", 
     RowBox[{"CompilationTarget", "\[Rule]", "\"\<C\>\""}], ",", 
     RowBox[{"RuntimeAttributes", "\[Rule]", 
      RowBox[{"{", "Listable", "}"}]}], ",", 
     RowBox[{"Parallelization", "\[Rule]", "True"}]}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.709320374185431*^9, 3.7093203741874638`*^9}, {
  3.7093329461978683`*^9, 3.709332947949211*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"decompandImage", "[", 
    RowBox[{"img_", "?", "ImageQ"}], "]"}], ":=", 
   RowBox[{"Image", "[", 
    RowBox[{
     RowBox[{"rawToLin", "[", 
      RowBox[{"lut", ",", 
       RowBox[{"ImageData", "[", 
        RowBox[{"img", ",", "\"\<Byte\>\""}], "]"}]}], "]"}], ",", 
     "\"\<Real32\>\""}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.709320428806663*^9, 3.709320438928236*^9}, {
   3.709332684504693*^9, 3.70933268730354*^9}, 3.7093329593830547`*^9}],

Cell[BoxData[
 RowBox[{"ListPlot", "[", 
  RowBox[{"rawToLin", "[", 
   RowBox[{"lut", ",", 
    RowBox[{"Array", "[", 
     RowBox[{
      RowBox[{"#", "&"}], ",", "256", ",", "0"}], "]"}]}], "]"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7092495214059258`*^9, 3.709249546740054*^9}, {
   3.709249671043024*^9, 3.709249706150538*^9}, {3.7092513932142773`*^9, 
   3.709251397385553*^9}, 3.709252130560368*^9, 3.709332859463361*^9, {
   3.7093328904890842`*^9, 3.709332936476074*^9}, 3.709332976702002*^9, {
   3.7093330406901417`*^9, 3.709333044374097*^9}, 3.7093333719759417`*^9, {
   3.7093336191450033`*^9, 3.709333625560688*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"importRaw", "[", "imageFilename_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "rawImage", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"importedImage", "=", 
      RowBox[{"Import", "[", "imageFilename", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"imageInfo", "[", "importedImage", "]"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Assert", "[", 
      RowBox[{"1", "==", 
       RowBox[{"ImageMeasurements", "[", 
        RowBox[{"importedImage", ",", "\"\<Channels\>\""}], "]"}]}], "]"}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"\"\<decompand Timing=\>\"", ",", 
       RowBox[{"First", "[", 
        RowBox[{"AbsoluteTiming", " ", "[", " ", 
         RowBox[{
          RowBox[{"rawImage", " ", "=", " ", 
           RowBox[{"decompandImage", "[", "importedImage", "]"}]}], ";"}], 
         "]"}], "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"imageInfo", "[", "rawImage", "]"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"ImageHistogram", "[", "importedImage", "]"}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"Print", "[", 
      RowBox[{"ImageHistogram", "[", "rawImage", "]"}], "]"}], ";", 
     "\[IndentingNewLine]", "rawImage"}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.7092539828668222`*^9, 3.70925402092834*^9}, {
   3.709254110261639*^9, 3.7092541433715057`*^9}, {3.709254183777808*^9, 
   3.709254241682164*^9}, {3.709254477617518*^9, 3.7092544778494673`*^9}, {
   3.709254752426189*^9, 3.70925477457607*^9}, {3.709254808563404*^9, 
   3.7092548521593647`*^9}, {3.709254911903756*^9, 3.709254914285447*^9}, {
   3.709255037956575*^9, 3.709255072235149*^9}, {3.709255103962435*^9, 
   3.7092551541821012`*^9}, {3.709255799916709*^9, 3.709255802938702*^9}, {
   3.7092558576947517`*^9, 3.70925587246279*^9}, {3.709256388747579*^9, 
   3.709256410668153*^9}, 3.709258237874983*^9, {3.709258485112385*^9, 
   3.709258514711862*^9}, {3.7092585858699827`*^9, 3.7092586289577093`*^9}, {
   3.709258696823091*^9, 3.709258722919241*^9}, 3.7092687770123053`*^9, {
   3.709333717596002*^9, 3.7093337514729*^9}, {3.709333977689364*^9, 
   3.709333990761187*^9}, {3.709334361552021*^9, 3.70933436892107*^9}, 
   3.709334414230853*^9, {3.709334483691733*^9, 3.709334512104998*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"promptFilename", "[", "string_", "]"}], ":=", 
  RowBox[{"SystemDialogInput", "[", 
   RowBox[{"\"\<FileOpen\>\"", ",", 
    RowBox[{"{", 
     RowBox[{"\"\<None\>\"", ",", 
      RowBox[{"{", 
       RowBox[{"\"\<Image files\>\"", " ", "\[Rule]", " ", 
        RowBox[{"{", 
         RowBox[{
         "\"\<*.jpg\>\"", ",", "\"\<*.JPG\>\"", ",", "\"\<*.jpeg\>\"", ",", 
          "\"\<*.JPEG\>\"", ",", "\"\<*.tif\>\"", ",", "\"\<*.png\>\""}], 
         "}"}]}], "}"}]}], "}"}], ",", 
    RowBox[{"WindowTitle", "\[Rule]", "string"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7092554337135572`*^9, 3.7092554896193027`*^9}}],

Cell[BoxData[
 RowBox[{"On", "[", "Assert", "]"}]], "Input",
 CellChangeTimes->{{3.708612422729518*^9, 3.70861242581326*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Load Image", "Subsection",
 CellChangeTimes->{{3.708611873841505*^9, 3.7086118766797657`*^9}}],

Cell[BoxData[
 RowBox[{"rawImageFilename", "=", 
  RowBox[{
  "promptFilename", "[", "\"\<Select raw valued image file...\>\"", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.673888451231083*^9, 3.673888477251664*^9}, {
   3.673888603236768*^9, 3.67388860368475*^9}, 3.67388871368918*^9, 
   3.673888781732106*^9, {3.673889132688655*^9, 3.673889139421357*^9}, {
   3.673890379033389*^9, 3.673890396401505*^9}, {3.673890562489163*^9, 
   3.6738906363330708`*^9}, {3.673890996966443*^9, 3.673891093176708*^9}, {
   3.673891540087682*^9, 3.673891554244711*^9}, {3.673891767165259*^9, 
   3.673891800249981*^9}, {3.673891852600513*^9, 3.673891856711451*^9}, {
   3.692057206148778*^9, 3.692057210594652*^9}, {3.69205724470688*^9, 
   3.692057246513351*^9}, {3.692057298129898*^9, 3.692057299655101*^9}, {
   3.6955857073258657`*^9, 3.6955857272767487`*^9}, {3.7092517170686207`*^9, 
   3.709251720465156*^9}, {3.709252259843019*^9, 3.709252273767511*^9}, {
   3.709255507578849*^9, 3.709255538241313*^9}, {3.709258538626799*^9, 
   3.709258540142352*^9}, 3.7093345282808533`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rawImage", "=", 
   RowBox[{"importRaw", "[", "rawImageFilename", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7092549332939043`*^9, 3.709254942093234*^9}, 
   3.709255934071356*^9, {3.70925596764756*^9, 3.709255973536694*^9}, 
   3.7092585447435303`*^9}],

Cell[BoxData[
 RowBox[{"methaneImageFilename", "=", "$Canceled"}]], "Input",
 CellChangeTimes->{{3.673888451231083*^9, 3.673888477251664*^9}, {
   3.673888603236768*^9, 3.67388860368475*^9}, 3.67388871368918*^9, 
   3.673888781732106*^9, {3.673889132688655*^9, 3.673889139421357*^9}, {
   3.673890379033389*^9, 3.673890396401505*^9}, {3.673890562489163*^9, 
   3.6738906363330708`*^9}, {3.673890996966443*^9, 3.673891093176708*^9}, {
   3.673891540087682*^9, 3.673891554244711*^9}, {3.673891767165259*^9, 
   3.673891800249981*^9}, {3.673891852600513*^9, 3.673891856711451*^9}, {
   3.692057206148778*^9, 3.692057210594652*^9}, {3.69205724470688*^9, 
   3.692057246513351*^9}, {3.692057298129898*^9, 3.692057299655101*^9}, {
   3.6955857073258657`*^9, 3.6955857272767487`*^9}, {3.7092517170686207`*^9, 
   3.709251720465156*^9}, {3.709252259843019*^9, 3.709252273767511*^9}, {
   3.709255507578849*^9, 3.709255538241313*^9}, {3.709256063268783*^9, 
   3.709256068685019*^9}, 3.709334573228003*^9, {3.709469138677556*^9, 
   3.709469142426757*^9}, {3.709513254006075*^9, 3.709513258947353*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"methaneImageFilename", "=", 
   RowBox[{
   "promptFilename", "[", "\"\<Select Methane image file...\>\"", "]"}]}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.673888451231083*^9, 3.673888477251664*^9}, {
   3.673888603236768*^9, 3.67388860368475*^9}, 3.67388871368918*^9, 
   3.673888781732106*^9, {3.673889132688655*^9, 3.673889139421357*^9}, {
   3.673890379033389*^9, 3.673890396401505*^9}, {3.673890562489163*^9, 
   3.6738906363330708`*^9}, {3.673890996966443*^9, 3.673891093176708*^9}, {
   3.673891540087682*^9, 3.673891554244711*^9}, {3.673891767165259*^9, 
   3.673891800249981*^9}, {3.673891852600513*^9, 3.673891856711451*^9}, {
   3.692057206148778*^9, 3.692057210594652*^9}, {3.69205724470688*^9, 
   3.692057246513351*^9}, {3.692057298129898*^9, 3.692057299655101*^9}, {
   3.6955857073258657`*^9, 3.6955857272767487`*^9}, {3.7092517170686207`*^9, 
   3.709251720465156*^9}, {3.709252259843019*^9, 3.709252273767511*^9}, {
   3.709255507578849*^9, 3.709255538241313*^9}, {3.709256063268783*^9, 
   3.709256068685019*^9}, 3.709334573228003*^9, {3.709469138677556*^9, 
   3.709469142426757*^9}, 3.709513243357067*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"haveMeth", "=", 
   RowBox[{"methaneImageFilename", " ", "\[NotEqual]", " ", "$Canceled"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.709486474093099*^9, 3.7094865080512943`*^9}}],

Cell[BoxData[
 RowBox[{"?", "methaneImageFilename"}]], "Input",
 CellChangeTimes->{3.7094854098782187`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{"haveMeth", ",", 
    RowBox[{"rawMethaneImageIn", "=", 
     RowBox[{"importRaw", "[", "methaneImageFilename", "]"}]}]}], "]"}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.709256112703957*^9, 3.70925612882931*^9}, 
   3.709258459721758*^9, 3.709469148725398*^9, {3.7094733168372793`*^9, 
   3.7094733207062263`*^9}, {3.7094733570465097`*^9, 
   3.7094733572514763`*^9}, {3.70948654099343*^9, 3.709486552655035*^9}, {
   3.709486776730702*^9, 3.709486783472492*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Resize Methane Image that has been 2x2 averaged down", "Subsection",
 CellChangeTimes->{{3.709473879443369*^9, 3.709473921688374*^9}}],

Cell[BoxData[
 RowBox[{"If", "[", 
  RowBox[{"haveMeth", ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"methaneWidth", "=", 
     RowBox[{"First", "[", 
      RowBox[{"ImageDimensions", "[", "rawMethaneImageIn", "]"}], "]"}]}], 
    ";", 
    RowBox[{"rawMethaneImage", "=", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"methaneWidth", "\[Equal]", "816"}], ",", 
       RowBox[{"ImagePad", "[", 
        RowBox[{
         RowBox[{"ImageResize", "[", 
          RowBox[{"rawMethaneImageIn", ",", 
           RowBox[{"Scaled", "[", "2", "]"}], ",", 
           RowBox[{"Resampling", "\[Rule]", "\"\<Linear\>\""}]}], "]"}], ",", 
         
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"0", ",", 
             RowBox[{"rightPad", "=", 
              RowBox[{"1648", "-", 
               RowBox[{"816", "*", "2"}]}]}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{"0", ",", "0"}], "}"}]}], "}"}]}], "]"}]}], "]"}]}], ";", 
    "\n", 
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"methaneWidth", "\[Equal]", 
       RowBox[{"First", "[", 
        RowBox[{"ImageDimensions", "[", "rawImage", "]"}], "]"}]}], ",", 
      RowBox[{"rawMethaneImage", "=", "rawMethaneImageIn"}]}], "]"}], ";", 
    "\n", 
    RowBox[{"imageInfo", "[", "rawMethaneImage", "]"}], ";"}]}], 
  "\[IndentingNewLine]", "]"}]], "Input",
 CellChangeTimes->{{3.709479422181905*^9, 3.709479484265605*^9}, {
   3.709479535487857*^9, 3.709479538501594*^9}, 3.709487049830166*^9, {
   3.70948709478533*^9, 3.7094871363707457`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Segments to color plane lists", "Subsection",
 CellChangeTimes->{{3.7086119222847643`*^9, 3.708611933516397*^9}, {
  3.708690725632174*^9, 3.708690727230135*^9}}],

Cell["\<\
Rearrange raw image into three lists of channels of 128-line image segments \
\>", "Text",
 CellChangeTimes->{{3.69979391091582*^9, 3.69979396187601*^9}, {
  3.699794013767428*^9, 3.6997940548666973`*^9}, {3.699794430788528*^9, 
  3.69979446031777*^9}, {3.708690751065222*^9, 3.708690754312644*^9}}],

Cell[BoxData[
 RowBox[{"On", "[", "Assert", "]"}]], "Input",
 CellChangeTimes->{{3.708612422729518*^9, 3.70861242581326*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Assert", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ImageDimensions", "[", "rawImage", "]"}], "[", 
     RowBox[{"[", "1", "]"}], "]"}], "==", "1648"}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.708612263036283*^9, 3.7086123105719976`*^9}, {
  3.708612507389224*^9, 3.708612536329885*^9}, {3.7086570727320433`*^9, 
  3.7086571260533123`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"aImage", ",", "bImage", ",", "cImage"}], "}"}], "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"ImagePartition", "[", 
        RowBox[{"rawImage", ",", 
         RowBox[{"{", 
          RowBox[{"1648", ",", "128"}], "}"}]}], "]"}], "[", 
       RowBox[{"[", 
        RowBox[{"i", ";;", " ", "All", ";;", " ", "3"}], "]"}], "]"}], "]"}], 
     ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "3"}], "}"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.696648207424368*^9, 3.696648285300232*^9}, {
  3.6966485555780697`*^9, 3.696648562817172*^9}, {3.696648647125955*^9, 
  3.6966486906111917`*^9}, {3.696648968442515*^9, 3.6966489715302563`*^9}, {
  3.696649206577971*^9, 3.696649258822904*^9}, {3.6966493351654787`*^9, 
  3.696649353835273*^9}, {3.6966494992472563`*^9, 3.696649504933304*^9}, {
  3.696649579731875*^9, 3.696649627161126*^9}, {3.696651434653734*^9, 
  3.696651445917117*^9}}],

Cell[BoxData[
 RowBox[{"If", "[", 
  RowBox[{"haveMeth", ",", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Assert", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"ImageDimensions", "[", "rawMethaneImage", "]"}], "[", 
       RowBox[{"[", "1", "]"}], "]"}], "==", "1648"}], "]"}], ";", 
    RowBox[{
     RowBox[{"{", "mImage", "}"}], "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"Flatten", "[", 
        RowBox[{
         RowBox[{"ImagePartition", "[", 
          RowBox[{"rawMethaneImage", ",", 
           RowBox[{"{", 
            RowBox[{"1648", ",", "128"}], "}"}]}], "]"}], "[", 
         RowBox[{"[", 
          RowBox[{"i", ";;", " ", "All", ";;", " ", "1"}], "]"}], "]"}], 
        "]"}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "1", ",", "1"}], "}"}]}], "]"}]}], ";", " ", 
    RowBox[{"(*", " ", 
     RowBox[{"Methane", " ", "raw"}], " ", "*)"}], 
    RowBox[{
     RowBox[{"Dimensions", "[", "mImage", "]"}], "[", 
     RowBox[{"[", "1", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellChangeTimes->{{3.708612263036283*^9, 3.7086123105719976`*^9}, {
   3.708612507389224*^9, 3.708612536329885*^9}, {3.7086570727320433`*^9, 
   3.7086571260533123`*^9}, 3.709472197612432*^9, {3.709487192023513*^9, 
   3.7094872352640657`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"Assert", "[", 
   RowBox[{
    RowBox[{"Dimensions", "[", "aImage", "]"}], "\[Equal]", 
    RowBox[{"Dimensions", "[", "bImage", "]"}], "\[Equal]", 
    RowBox[{"Dimensions", "[", "cImage", "]"}]}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.708657008631501*^9, 3.7086570203631496`*^9}, {
  3.7086571341570673`*^9, 3.708657185881627*^9}}],

Cell[BoxData[
 RowBox[{"segmentsPerPlane", "=", 
  RowBox[{
   RowBox[{"Dimensions", "[", "aImage", "]"}], "[", 
   RowBox[{"[", "1", "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.708657232508615*^9, 3.7086572579791117`*^9}}],

Cell[BoxData[
 RowBox[{"Dimensions", "[", "cImage", "]"}]], "Input",
 CellChangeTimes->{{3.709079894999197*^9, 3.709079901838497*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Partition Segments", "Subsection",
 CellChangeTimes->{{3.709488193413418*^9, 3.7094882048596*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"aGrid", ",", "bGrid", ",", "cGrid"}], "}"}], "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Flatten", "[", 
      RowBox[{
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"ImagePartition", "[", 
           RowBox[{"#", ",", "128"}], "]"}], "&"}], ",", "segments"}], "]"}], 
       ",", "1"}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"segments", ",", 
       RowBox[{"{", 
        RowBox[{"aImage", ",", "bImage", ",", "cImage"}], "}"}]}], "}"}]}], 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7094882091614437`*^9, 3.709488227274721*^9}, {
  3.7094882678612213`*^9, 3.70948827782215*^9}, {3.709488350800041*^9, 
  3.7094883540860777`*^9}, {3.70948839945321*^9, 3.709488423177079*^9}, {
  3.709488474239542*^9, 3.709488486075099*^9}, {3.709488580707239*^9, 
  3.7094887070048103`*^9}, {3.709502579250779*^9, 3.709502579479025*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"myAdjust", "[", "img0_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"img", "=", "img0"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"imgData", "=", 
      RowBox[{"Flatten", "[", 
       RowBox[{"ImageData", "[", "img", "]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"max", "=", 
      RowBox[{"Quantile", "[", 
       RowBox[{"imgData", ",", 
        RowBox[{
         RowBox[{"(", 
          RowBox[{
           RowBox[{"64", "*", "64"}], "-", "5"}], ")"}], "/", 
         RowBox[{"(", 
          RowBox[{"64", "*", "64"}], ")"}]}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
       RowBox[{"min", "=", 
        RowBox[{"Quantile", "[", 
         RowBox[{"imgData", ",", 
          RowBox[{
           RowBox[{"(", "15", ")"}], "/", 
           RowBox[{"(", 
            RowBox[{"64", "*", "64"}], ")"}]}]}], "]"}]}], ";"}], "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"min", "=", 
      RowBox[{"Quantile", "[", 
       RowBox[{
        RowBox[{"Flatten", "[", 
         RowBox[{"ImageData", "[", 
          RowBox[{"ImagePad", "[", 
           RowBox[{"img", ",", 
            RowBox[{"{", 
             RowBox[{
              RowBox[{"{", 
               RowBox[{
                RowBox[{"-", "23"}], ",", "0"}], "}"}], ",", 
              RowBox[{"{", 
               RowBox[{"0", ",", "0"}], "}"}]}], "}"}]}], "]"}], "]"}], "]"}],
         ",", 
        RowBox[{
         RowBox[{"(", "15", ")"}], "/", 
         RowBox[{"(", 
          RowBox[{"64", "*", "64"}], ")"}]}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ImagePad", "[", 
      RowBox[{
       RowBox[{"ImageAdjust", "[", 
        RowBox[{"img", ",", 
         RowBox[{"{", 
          RowBox[{"0", ",", "0", ",", "1"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"min", ",", "max"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"8", "/", "255"}], ",", 
           RowBox[{"253", "/", "255"}]}], "}"}]}], "]"}], ",", "3", ",", 
       "0.9"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJwdyk8og3EAxvEZV4floGbYDrvISpF2oPxrZuyPTYrQWom8K3snJY2kcbG2
Fe3y7iIUy5yQw7JWTG4zs7Hxxmg2b6KNg5v3+R2ePofnK7PMGieFAoFAzA9e
hKOugR2uc6X2wQPvG98YOBJR+6GEUW1DxXHTLszqmQNY4Q4EYHIp9wv3xzf/
oPCWLtPybvX7RLAr9D0KxT7FGDw73DDDDOcm7jl7F+Bqa2gZsi+fTkjZRGtQ
FzxPwGxfKQXVr9onqLT+PEOXnuZIl5wjljcPfcHpjL8IoxPxOh1vMZ0gtpSs
3VDa4SXGUzE1ZLMc8fJq3QLN70GiVK6k9bw9J8N2mHbMn8J8qUBsi+RFBvzU
B1FV/VgDWQ9LnGJmruERPXgDTeEqk5HXa5BboKSgoWBDTGaH7ZWaRVifu3PA
f8as3fE=
  "]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ImageAssemble", "[", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"ConstantImage", "[", "v", "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"v", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "/", "255"}], ",", 
          RowBox[{"8", "/", "255"}], ",", 
          RowBox[{"1", "/", "255"}], ",", 
          RowBox[{"254", "/", "255"}], ",", 
          RowBox[{"252", "/", "255"}], ",", 
          RowBox[{"253", "/", "255"}], ",", 
          RowBox[{"255", "/", "255"}]}], "}"}]}], "}"}]}], "]"}], "]"}], 
   ";"}], " ", 
  RowBox[{"(*", " ", 
   RowBox[{"look", " ", "at", " ", "display", " ", "response"}], " ", 
   "*)"}]}]], "Input",
 CellChangeTimes->{{3.709499853676759*^9, 3.709499951941568*^9}, {
  3.709500005095187*^9, 3.70950012697151*^9}, {3.709500175269372*^9, 
  3.709500186843335*^9}, {3.7095002204357443`*^9, 3.7095002208905087`*^9}, {
  3.709500551652261*^9, 3.709500601321917*^9}, {3.709500771495892*^9, 
  3.709500771570891*^9}, {3.7095018266909733`*^9, 3.70950183713138*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rgbGrids", "=", 
   RowBox[{"{", 
    RowBox[{"cGrid", ",", "bGrid", ",", "aGrid"}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.709502071416725*^9, 3.709502103890774*^9}}],

Cell[BoxData[
 RowBox[{"rgbAss", "=", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{"ImageAssemble", "[", "grid", "]"}], ",", 
    RowBox[{"{", 
     RowBox[{"grid", ",", "rgbGrids"}], "}"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.70950189148713*^9, 3.709501933019856*^9}, {
  3.709502021092719*^9, 3.709502066801656*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"rgbAdjGrids", "=", 
   RowBox[{"Map", "[", 
    RowBox[{"myAdjust", ",", "rgbGrids", ",", 
     RowBox[{"{", "3", "}"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7095037811542263`*^9, 3.709503821557851*^9}, {
  3.7095038651948423`*^9, 3.709503935692606*^9}}],

Cell[BoxData[
 RowBox[{"Dimensions", "[", "rgbAdjGrids", "]"}]], "Input",
 CellChangeTimes->{{3.709504544399637*^9, 3.709504554643667*^9}}],

Cell[BoxData[
 RowBox[{"rgbAdjAss", "=", 
  RowBox[{"Map", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"ImagePad", "[", 
      RowBox[{
       RowBox[{"ImageAssemble", "[", "#", "]"}], ",", "3", ",", "0.9"}], 
      "]"}], "&"}], ",", 
    RowBox[{"rgbAdjGrids", "[", 
     RowBox[{"[", 
      RowBox[{"All", ",", 
       RowBox[{"3", ";;", 
        RowBox[{"-", "6"}]}], ",", "All"}], "]"}], "]"}]}], "]"}]}]], "Input",\

 CellChangeTimes->{{3.70950189148713*^9, 3.709501933019856*^9}, {
   3.709502021092719*^9, 3.709502066801656*^9}, 3.709502255700097*^9, {
   3.709502293696044*^9, 3.7095023020793867`*^9}, {3.709503162798805*^9, 
   3.7095031631201*^9}, {3.7095040588421507`*^9, 3.7095041165685062`*^9}, {
   3.709504149800559*^9, 3.709504158687307*^9}, {3.709504535189753*^9, 
   3.709504597243663*^9}, {3.709504652410033*^9, 3.709504677967716*^9}, {
   3.709505737771628*^9, 3.709505768464944*^9}}],

Cell[BoxData[
 RowBox[{"allDetails", "=", 
  RowBox[{"ImagePad", "[", 
   RowBox[{
    RowBox[{"ImageAssemble", "[", 
     RowBox[{"Map", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ImagePad", "[", 
         RowBox[{"#", ",", "32", ",", "0.01"}], "]"}], "&"}], ",", 
       "rgbAdjAss"}], "]"}], "]"}], ",", "32", ",", "0.01"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.709504706691609*^9, 3.709504756859511*^9}, {
  3.709504852870496*^9, 3.709504939576523*^9}, {3.7095052807297688`*^9, 
  3.709505284176353*^9}, {3.7095053405671186`*^9, 3.709505361603793*^9}, {
  3.709506020410583*^9, 3.709506023176773*^9}, {3.709506067577039*^9, 
  3.709506070256*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"levs", "=", 
   RowBox[{"Map", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"ImageLevels", "[", 
       RowBox[{"#", ",", "All"}], "]"}], "&"}], ",", "rgbAss"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.709498279764455*^9, 3.7094983004109697`*^9}, {
   3.709503222663125*^9, 3.709503293589994*^9}, 3.709505980523876*^9}],

Cell[BoxData[
 RowBox[{"Length", " ", "/@", " ", "levs"}]], "Input",
 CellChangeTimes->{{3.709498976278798*^9, 3.7094989883435707`*^9}, {
  3.709503363520626*^9, 3.709503368487496*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Export", "Subsection",
 CellChangeTimes->{{3.70870564259851*^9, 3.7087056433567343`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"finalCrop", "=", "allDetails"}], ";"}]], "Input",
 CellChangeTimes->{{3.7087057625371*^9, 3.7087057743587*^9}, {
  3.708707365490856*^9, 3.7087073690409107`*^9}, {3.7095070436141977`*^9, 
  3.709507046589714*^9}}],

Cell[BoxData[
 RowBox[{"Export", "[", 
  RowBox[{"\"\</tmp/juno12.png\>\"", ",", "finalCrop"}], "]"}]], "Input",
 CellChangeTimes->{{3.708644236719198*^9, 3.708644292186872*^9}, {
  3.708707386664171*^9, 3.708707390453937*^9}, {3.709468056146146*^9, 
  3.7094680853030787`*^9}, {3.70950706240515*^9, 3.7095070624506483`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"rawImageFilename", ",", "methaneImageFilename"}], "}"}]], "Input",
 CellChangeTimes->{{3.709469154596445*^9, 3.709469172890821*^9}}],

Cell[BoxData[
 RowBox[{"ImageDimensions", "[", "finalCrop", "]"}]], "Input",
 CellChangeTimes->{{3.709512528655818*^9, 3.7095125439027967`*^9}}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1171, 845},
WindowMargins->{{1, Automatic}, {Automatic, 0}},
FrontEndVersion->"11.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (September \
21, 2016)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 404, 5, 92, "Title"],
Cell[CellGroupData[{
Cell[1009, 31, 97, 1, 44, "Subsection"],
Cell[1109, 34, 73, 1, 32, "Input"],
Cell[1185, 37, 628, 14, 75, "Input"],
Cell[1816, 53, 442, 10, 32, "Input"],
Cell[2261, 65, 3739, 55, 285, "Input"],
Cell[6003, 122, 761, 20, 54, "Input"],
Cell[6767, 144, 509, 13, 32, "Input"],
Cell[7279, 159, 635, 13, 32, "Input"],
Cell[7917, 174, 2480, 49, 222, "Input"],
Cell[10400, 225, 661, 15, 75, "Input"],
Cell[11064, 242, 125, 2, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[11226, 249, 100, 1, 44, "Subsection"],
Cell[11329, 252, 1073, 17, 32, "Input"],
Cell[12405, 271, 293, 6, 32, "Input"],
Cell[12701, 279, 1093, 15, 32, "Input"],
Cell[13797, 296, 1170, 19, 32, "Input"],
Cell[14970, 317, 216, 5, 32, "Input"],
Cell[15189, 324, 107, 2, 32, "Input"],
Cell[15299, 328, 522, 11, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[15858, 344, 140, 1, 44, "Subsection"],
Cell[16001, 347, 1572, 40, 180, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[17610, 392, 168, 2, 44, "Subsection"],
Cell[17781, 396, 309, 5, 30, "Text"],
Cell[18093, 403, 125, 2, 32, "Input"],
Cell[18221, 407, 383, 9, 32, "Input"],
Cell[18607, 418, 1028, 24, 32, "Input"],
Cell[19638, 444, 1297, 33, 117, "Input"],
Cell[20938, 479, 376, 8, 32, "Input"],
Cell[21317, 489, 227, 5, 32, "Input"],
Cell[21547, 496, 134, 2, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[21718, 503, 104, 1, 44, "Subsection"],
Cell[21825, 506, 954, 24, 32, "Input"],
Cell[22782, 532, 2657, 74, 159, "Input"],
Cell[25442, 608, 1077, 26, 54, "Input"],
Cell[26522, 636, 211, 5, 32, "Input"],
Cell[26736, 643, 330, 8, 32, "Input"],
Cell[27069, 653, 302, 7, 32, "Input"],
Cell[27374, 662, 139, 2, 32, "Input"],
Cell[27516, 666, 905, 21, 32, "Input"],
Cell[28424, 689, 670, 16, 32, "Input"],
Cell[29097, 707, 367, 10, 32, "Input"],
Cell[29467, 719, 185, 3, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[29689, 727, 95, 1, 44, "Subsection"],
Cell[29787, 730, 248, 5, 32, "Input"],
Cell[30038, 737, 325, 5, 32, "Input"],
Cell[30366, 744, 172, 3, 32, "Input"],
Cell[30541, 749, 144, 2, 32, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)

